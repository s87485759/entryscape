<!DOCTYPE
 html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
 "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
 <html>
<head>
<title>Gadget</title>
</head>
<body>
<h1 id="entriesH"></h1>
<ol id="entries">
</ol>
<script src="json2.js"></script>
<script src="jsscam.js"></script>
<script type="text/javascript">

var session = SCAM.getRepository(
		'http://localhost/scam', 'Donald', 'donalddonald',
		function(result) {
	try {
		result.throwException();
		var portfolio = session.getHomePortfolio(
				function(result) {
			try {
				result.throwException();
				document.getElementById('entriesH').appendChild(document.
						createTextNode(portfolio.getSelfEntry().getMeta().
								getTitle()));
			} catch (e) {
				alert('Data fetch error: ' + e.message);
			}
		});
		var homeEntry = portfolio.getHomeEntry(function(result) {
			try {
				result.throwException();
				var entries = homeEntry.getResource().getEntries();
				var list = document.getElementById('entries');
				var i;
				for (i in entries) {
					var entry = entries[i];
					var item = document.createElement('li');
					var link = document.createElement('a');
					link.appendChild(document.createTextNode(entry.
							getMeta().getTitle()));
					link.href = entry.getId();
					item.appendChild(link);
					list.appendChild(item);
				}
			} catch (e) {
				alert('Data fetch error: ' + e.message);
			}
		});
	} catch (e) {
		alert('Login error: ' + e.message);
	}
});

</script>
</body>
</html>